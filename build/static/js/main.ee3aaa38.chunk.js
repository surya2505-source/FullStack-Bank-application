(this["webpackJsonpfullstack-banking-app"]=this["webpackJsonpfullstack-banking-app"]||[]).push([[0],{48:function(e,t,a){e.exports=a(82)},81:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(23),o=a.n(s),c=a(9),l=a(11),i=a.n(l),u=a(6),p=a(20),m=a(14),d=a(15),h=a(16),f=a(17),g=a(19),E=a(83),v=a(84),b=a(5),_=a.n(b),y=a(10),O=a(12),w=a.n(O),S="http://localhost:5000",k=function(e){return{type:"GET_ERRORS",errors:e}},j=a(43),C=a.n(j),I=a(21),N=a(44),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":return t.user;case"SIGN_OUT":return{};default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.errors;case"RESET_ERRORS":return{};default:return e}},x=a(45),L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROFILE":return Object(x.a)({},t.profile);default:return e}},G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,U=Object(I.e)(Object(I.c)({auth:M,errors:R,profile:L}),G(Object(I.a)(N.a))),P=function(e){return e.every((function(e){return""!==Object.values(e)[0]}))},D=function(e){var t=e.userid,a=e.email;U.dispatch(J({userid:t,email:a,token:localStorage.getItem("user_token")})),U.dispatch(z(a))},T=function(){var e=localStorage.getItem("user_token");e&&(w.a.defaults.headers.common.Authorization="Bearer ".concat(e))},A=function(){delete w.a.defaults.headers.common.Authorization},q=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var r,n,s,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],n=o.length>3&&void 0!==o[3]&&o[3],r&&T(),e.next=5,w.a.get(t,a);case 5:return s=e.sent,n&&A(),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(y.a)(_.a.mark((function e(t,a){var r,n,s,o=arguments;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(o.length>2&&void 0!==o[2])||o[2],n=o.length>3&&void 0!==o[3]&&o[3],r&&T(),e.next=5,w.a.post(t,a);case 5:return s=e.sent,n&&A(),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(e){return{type:"UPDATE_PROFILE",profile:e}},W=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){var r;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B("".concat(S,"/profile"),e);case 3:r=t.sent,a(F(r.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&a(k(t.t0.response.data));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},z=function(){return function(){var e=Object(y.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q("".concat(S,"/profile"));case 3:a=e.sent,t(F(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(k(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},J=function(e){return{type:"SIGN_IN",user:e}},X=function(e,t){return function(){var a=Object(y.a)(_.a.mark((function a(r){var n,s;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.a.post("".concat(S,"/signin"),{email:e,password:t});case 3:n=a.sent,s=n.data,localStorage.setItem("user_token",s.token),r(J(s)),r(z(s.email)),ne.push("/profile"),a.next=15;break;case 11:a.prev=11,a.t0=a.catch(0),console.log("error",a.t0),a.t0.response&&r(k(a.t0.response.data));case 15:case"end":return a.stop()}}),a,null,[[0,11]])})));return function(e){return a.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(y.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.a.post("".concat(S,"/signup"),e);case 3:return t.abrupt("return",{success:!0});case 6:return t.prev=6,t.t0=t.catch(0),console.log("error",t.t0),t.t0.response&&a(k(t.t0.response.data)),t.abrupt("return",{success:!1});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},H=a(18),K=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:"",errorMsg:""},e.handleLogin=function(t){t.preventDefault();var a=e.state,r=a.email,n=a.password;P([{email:r},{password:n}])?(e.setState({errorMsg:{signin_error:""}}),e.props.dispatch(X(r,n))):e.setState({errorMsg:{signin_error:"Please enter all the fields."}})},e.handleInputChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(m.a)({},r,n))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){i.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state.errorMsg;return n.a.createElement("div",{className:"login-page"},n.a.createElement("h1",null,"Banking Application"),n.a.createElement("div",{className:"login-form"},n.a.createElement(E.a,{onSubmit:this.handleLogin},e&&e.signin_error&&n.a.createElement("p",{className:"errorMsg centered-message"},e.signin_error),n.a.createElement(E.a.Group,{controlId:"email"},n.a.createElement(E.a.Label,null,"Email address"),n.a.createElement(E.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleInputChange})),n.a.createElement(E.a.Group,{controlId:"password"},n.a.createElement(E.a.Label,null,"Password"),n.a.createElement(E.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})),n.a.createElement("div",{className:"action-items"},n.a.createElement(v.a,{variant:"primary",type:"submit"},"Login"),n.a.createElement(H.a,{to:"/register",className:"btn btn-secondary"},"Create account")))))}}]),a}(n.a.Component),Q=Object(c.b)((function(e){return{errors:e.errors}}))(K),Y=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={first_name:"",last_name:"",email:"",password:"",cpassword:"",successMsg:"",errorMsg:"",isSubmitted:!1},e.registerUser=function(t){t.preventDefault();var a=e.state,r=a.first_name,n=a.last_name,s=a.email,o=a.password,c=a.cpassword;P([{first_name:r},{last_name:n},{email:s},{password:o},{cpassword:c}])?o!==c?e.setState({errorMsg:{signup_error:"Password and confirm password does not match."}}):(e.setState({isSubmitted:!0}),e.props.dispatch(V({first_name:r,last_name:n,email:s,password:o})).then((function(t){t.success&&e.setState({successMsg:"User registered successfully.",errorMsg:""})}))):e.setState({errorMsg:{signup_error:"Please enter all the fields."}})},e.handleInputChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(m.a)({},r,n))},e}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e){i.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.successMsg,r=e.isSubmitted;return n.a.createElement("div",{className:"login-page"},n.a.createElement("h2",null,"Register User"),n.a.createElement("div",{className:"login-form"},n.a.createElement(E.a,{onSubmit:this.registerUser},t&&t.signup_error?n.a.createElement("p",{className:"errorMsg centered-message"},t.signup_error):r&&n.a.createElement("p",{className:"successMsg centered-message"},a),n.a.createElement(E.a.Group,{controlId:"first_name"},n.a.createElement(E.a.Label,null,"First name"),n.a.createElement(E.a.Control,{type:"text",name:"first_name",placeholder:"Enter first name",onChange:this.handleInputChange})),n.a.createElement(E.a.Group,{controlId:"last_name"},n.a.createElement(E.a.Label,null,"Last name"),n.a.createElement(E.a.Control,{type:"text",name:"last_name",placeholder:"Enter last name",onChange:this.handleInputChange})),n.a.createElement(E.a.Group,{controlId:"email"},n.a.createElement(E.a.Label,null,"Email address"),n.a.createElement(E.a.Control,{type:"email",name:"email",placeholder:"Enter email",onChange:this.handleInputChange})),n.a.createElement(E.a.Group,{controlId:"password"},n.a.createElement(E.a.Label,null,"Password"),n.a.createElement(E.a.Control,{type:"password",name:"password",placeholder:"Enter password",onChange:this.handleInputChange})),n.a.createElement(E.a.Group,{controlId:"cpassword"},n.a.createElement(E.a.Label,null,"Confirm password"),n.a.createElement(E.a.Control,{type:"password",name:"cpassword",placeholder:"Enter confirm password",onChange:this.handleInputChange})),n.a.createElement("div",{className:"action-items"},n.a.createElement(v.a,{variant:"primary",type:"submit"},"Register"),n.a.createElement(H.a,{to:"/",className:"btn btn-secondary"},"Login")))))}}]),a}(n.a.Component),Z=Object(c.b)((function(e){return{errors:e.errors}}))(Y),$=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={first_name:"",last_name:"",email:"",errorMsg:"",isSubmitted:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state,r=a.first_name,n=a.last_name,s={first_name:r,last_name:n};P([{first_name:r},{last_name:n}])?(e.setState({isSubmitted:!0,errorMsg:""}),e.props.dispatch(W(s))):e.setState({errorMsg:{update_error:"Please enter all the fields."}})},e.handleOnChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(m.a)({},r,n))},e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.profile;if(!i.a.isEmpty(e)){var t=e.first_name,a=e.last_name,r=e.email;this.setState({first_name:t,last_name:a,email:r})}}},{key:"componentDidUpdate",value:function(e){if(i.a.isEqual(e.errors,this.props.errors)||this.setState({errorMsg:this.props.errors}),!i.a.isEqual(e.profile,this.props.profile)){var t=this.props.profile,a=t.first_name,r=t.last_name,n=t.email;this.setState({first_name:a,last_name:r,email:n})}}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"RESET_ERRORS"})}},{key:"render",value:function(){var e=this.state,t=e.errorMsg,a=e.first_name,r=e.last_name,s=e.email,o=e.isSubmitted;return n.a.createElement("div",{className:"col-md-6 offset-md-3"},n.a.createElement(E.a,{onSubmit:this.handleSubmit,className:"profile-form"},t&&t.update_error?n.a.createElement("p",{className:"errorMsg centered-message"},t.update_error):o&&n.a.createElement("p",{className:"successMsg centered-message"},"Profile updated successfully."),n.a.createElement(E.a.Group,{controlId:"email"},n.a.createElement(E.a.Label,null,"Email address:"),n.a.createElement("span",{className:"label-value"},s)),n.a.createElement(E.a.Group,{controlId:"first_name"},n.a.createElement(E.a.Label,null,"First name:"),n.a.createElement(E.a.Control,{type:"text",name:"first_name",placeholder:"Enter your first name",value:a,onChange:this.handleOnChange})),n.a.createElement(E.a.Group,{controlId:"last_name"},n.a.createElement(E.a.Label,null,"Last name:"),n.a.createElement(E.a.Control,{type:"text",name:"last_name",placeholder:"Enter your last name",value:r,onChange:this.handleOnChange})),n.a.createElement(v.a,{variant:"primary",type:"submit"},"Submit")))}}]),a}(n.a.Component),ee=Object(c.b)((function(e){return{profile:e.profile,errors:e.errors}}))($),te=function(){return n.a.createElement("header",null,n.a.createElement("h1",null,"Banking Application"),n.a.createElement("div",{className:"links"},n.a.createElement(H.a,{to:"/profile",className:"link"},"Profile"),n.a.createElement(H.a,{to:"/logout",className:"link"},"Logout")))},ae=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.history;(0,e.dispatch)(function(){var e=Object(y.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B("".concat(S,"/logout"),!0,!0);case 3:return localStorage.removeItem("user_token"),e.abrupt("return",t({type:"SIGN_OUT"}));case 7:e.prev=7,e.t0=e.catch(0),e.t0.response&&t(k(e.t0.response.data));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()).then((function(){return t.push("/")}))}},{key:"render",value:function(){return null}}]),a}(n.a.Component),re=Object(c.b)()(ae),ne=Object(u.a)(),se=Object(c.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.auth;return n.a.createElement(p.b,{history:ne},n.a.createElement("div",null,!i.a.isEmpty(t.token)&&n.a.createElement(te,null),n.a.createElement("div",{className:"container"},n.a.createElement(p.c,null,n.a.createElement(p.a,{path:"/",component:Q,exact:!0}),n.a.createElement(p.a,{path:"/register",component:Z}),n.a.createElement(p.a,{path:"/profile",component:ee}),n.a.createElement(p.a,{path:"/logout",component:re})))))}));a(80),a(81);!function(){var e=localStorage.getItem("user_token");if(e){var t=window.location.pathname;"/"!==t&&"/register"!==t||ne.push("/profile");var a=C()(e);D(a)}else ne.push("/")}();var oe=document.getElementById("root");o.a.render(n.a.createElement(c.a,{store:U},n.a.createElement(se,null)),oe)}},[[48,1,2]]]);
//# sourceMappingURL=main.ee3aaa38.chunk.js.map